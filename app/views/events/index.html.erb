
<div class="container">

	<div class="row col-lg-offset-2 col-lg-8">
		<div class="page-header">
			<h1>TechToday </h1>
		</div>
		<h3> // A simpler way to find tech events in Toronto // </h2>
		<h2>Events Happening On: <%= pretty_date(@date) %></h2>
 		<br>
 		<%= form_for(:event, url: events_path, method: :get) do |f| %>
	 		<%= f.text_field :date, placeholder: 'Select a date', onchange: "this.form.submit();" %>
 		<% end %>
 		<br>
 	</div>

	<div class="row col-lg-offset-2 col-lg-8">
		<div id="map-canvas"></div>
	</div>

	<div class="row col-lg-offset-2 col-lg-8">
		<ol>
			<% @events.each do |event| %>
					<%= render partial: 'event', locals: {event: event} %>
			<% end %>
		</ol>
	</div>
</div>

<%= javascript_tag do %>
  window.events = <%= raw @events.map {|event|
		unless event['venue'].nil? || pretty_date(Time.at(event['time']/1000)) != @date
  		{ latitude: event['venue']['lat'], longitude: event['venue']['lon'], eventname: event['name'] }
  	end }.to_json %>
<% end %>





